list_="";  qry="1"; scan=""; var_inc=0; var_scan=0; recs=$1; next=$recs;  while [ "$qry" != "" ] ;  do  if [ "$(echo "$next" | grep "/")" == "" ]; then break;  fi;  res=$(sed 's/\//\\/g' <<< "$next"); scan=$(kesl-control -T --scan-file $next 2>&1);   qry=$(echo $scan | sudo grep -Po '(?<=Недопустимый путь к файлу: ).*');  list_+=' '$qry;  qry=$(sed 's/\//\\\\/g' <<< "$qry");  re_="sed  "s/$qry[^.*]//g"  <<< \""$res"\""; next=$(sudo sh -c "$re_"); recs=$(sed 's/\\/\//g' <<< "$next");  next=$(sed 's/\\/\//g' <<< "$next");  if [ "$qry" != "" ]; then var_inc=$((var_inc+1)); else var_scan=$((var_scan+1)); fi; done; if [ $var_inc -gt 0 ]; then echo "Недопустимые каталоги: "$list_; fi; if [ "$var_scan" -gt 0 ]; then  while read i; do echo "$i"; done <<< $scan; fi;
